# 🎮 游戏图集裁剪工具

一个专业的游戏图集裁剪和区域检测工具，支持智能区域识别、手动编辑和多格式导出。

## ✨ 主要功能

### 🖼️ 图像处理
- **拖拽上传**：支持拖拽或点击上传图像文件
- **多格式支持**：PNG、JPG、WEBP、BMP等主流格式
- **实时预览**：高质量图像显示和缩放

### 🎯 区域检测
- **智能检测**：基于像素分析的自动区域识别
- **参数调节**：可调节敏感度、最小区域大小、边缘检测强度
- **实时反馈**：检测过程中显示进度和结果

### ✏️ 手动编辑
- **多种工具**：矩形、圆形、选择、平移工具
- **精确控制**：像素级精度的区域绘制
- **交互编辑**：拖拽调整、右键菜单操作

### 📤 导出功能
- **选择导出**：导出选中的特定区域
- **批量导出**：一键导出所有区域
- **图集导出**：生成带标注的完整图集
- **数据导出**：导出区域坐标和元数据（JSON格式）

### 🔧 高级特性
- **撤销重做**：完整的操作历史管理
- **快捷键支持**：提升操作效率
- **响应式设计**：适配不同屏幕尺寸
- **性能优化**：Web Worker后台处理，流畅体验

## 🚀 快速开始

### 环境要求
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 支持HTML5 Canvas和Web Workers
- 本地HTTP服务器（用于开发）

### 安装运行
1. 克隆或下载项目文件
2. 启动本地服务器：
   ```bash
   python -m http.server 8000
   ```
3. 打开浏览器访问：`http://localhost:8000`

## 📖 使用指南

### 基本操作流程
1. **加载图像**：点击"打开文件"或拖拽图像到画布区域
2. **创建区域**：
   - 自动检测：点击"自动检测"按钮
   - 手动绘制：选择工具（矩形/圆形）在画布上绘制
3. **编辑区域**：
   - 选择工具：点击区域进行选择
   - 右键菜单：编辑、删除、复制区域
   - 拖拽调整：直接拖拽区域边界
4. **导出结果**：
   - 选择导出：选中区域后点击"导出选中"
   - 全部导出：点击"导出全部"
   - 图集导出：点击"导出图集"
   - 数据导出：点击"导出数据"

### 工具说明
- **选择工具**：选择和移动区域
- **矩形工具**：绘制矩形区域
- **圆形工具**：绘制圆形区域
- **平移工具**：拖拽移动画布视图

### 快捷键
- `Ctrl+Z`：撤销
- `Ctrl+Y`：重做
- `Delete`：删除选中区域
- `Ctrl+A`：全选区域
- `Escape`：取消选择

### 参数调节
- **敏感度**：控制自动检测的灵敏程度
- **最小区域大小**：过滤过小的检测区域
- **边缘检测强度**：调节边缘识别精度

## 🏗️ 项目结构

```
Album_cropping/
├── index.html          # 主页面
├── css/
│   └── style.css       # 样式文件
├── js/
│   ├── main.js         # 主要逻辑
│   ├── export.js       # 导出功能
│   └── worker.js       # 后台处理
├── test-image.svg      # 测试图像
└── README.md           # 项目文档
```

## 🔧 技术特性

### 核心技术
- **HTML5 Canvas**：高性能图像渲染
- **Web Workers**：后台图像处理
- **ES6+ JavaScript**：现代化代码结构
- **CSS3**：响应式界面设计

### 算法实现
- **洪水填充算法**：区域边界检测
- **像素分析**：透明度和颜色阈值判断
- **边界优化**：区域边界精确计算
- **区域合并**：相邻区域智能合并

### 性能优化
- **异步处理**：避免UI阻塞
- **内存管理**：及时释放临时资源
- **渲染优化**：只重绘必要区域
- **事件节流**：优化交互响应