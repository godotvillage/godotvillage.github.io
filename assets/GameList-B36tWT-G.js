import{g as m,i as _,b as p}from"./request-CfbvxOJl.js";import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,o as l,a as s,f as r,t as i,F as g,h,b as c,p as v}from"./app-B13rPDbg.js";const f={name:"GameList",data(){return{baseUrl:p,imageBaseUrl:_,games:[],loadingGames:!1,error:null}},mounted(){this.loadGames()},methods:{async loadGames(){this.loadingGames=!0,this.error=null;try{const n=await m.getGames();n.success?this.games=n.data:this.error=`获取游戏列表失败: ${n.error}`}catch(n){this.error=n.message}finally{this.loadingGames=!1}},playGame(n){const e=`/game/play.html?id=${n.folder_name}`;window.location.href=e},formatDate(n){return new Date(n).toLocaleString("zh-CN")}}},y={class:"game-list-container"},G={class:"list-controls"},k=["disabled"],b={key:0,class:"loading"},B={key:1,class:"error-message"},C={key:2,class:"no-games"},x={key:3,class:"games-container"},U=["onClick"],w={class:"game-card-content"},z={class:"game-cover"},D=["src","alt"],L={key:1,class:"no-cover"},N={class:"game-info"},F={class:"author"},V={class:"version"},S={class:"description"},A={class:"game-meta"},E={class:"file-size"},I={class:"upload-time"},M={class:"play-button"},T={key:0},j={key:1};function q(n,e,H,J,t,d){return l(),a("div",y,[e[6]||(e[6]=s("h1",null,"游戏列表",-1)),e[7]||(e[7]=s("p",null,"探索由社区成员上传的精彩游戏作品",-1)),s("div",G,[s("button",{onClick:e[0]||(e[0]=(...o)=>d.loadGames&&d.loadGames(...o)),disabled:t.loadingGames,class:"load-btn"},i(t.loadingGames?"加载中...":"刷新列表"),9,k)]),t.loadingGames&&t.games.length===0?(l(),a("div",b,[...e[1]||(e[1]=[s("p",null,"正在加载游戏列表...",-1)])])):r("v-if",!0),t.error?(l(),a("div",B,i(t.error),1)):r("v-if",!0),r(" 游戏列表显示区域 "),!t.loadingGames&&t.games.length===0&&!t.error?(l(),a("div",C,[...e[2]||(e[2]=[s("p",null,"暂无游戏",-1)])])):r("v-if",!0),t.games.length>0?(l(),a("div",x,[(l(!0),a(g,null,h(t.games,o=>(l(),a("div",{key:o.game_id,class:"game-card",onClick:K=>d.playGame(o)},[s("div",w,[s("div",z,[o.cover_image?(l(),a("img",{key:0,src:`${t.imageBaseUrl}/${o.cover_image}`,alt:`${o.game_name} 封面`,class:"cover-image"},null,8,D)):(l(),a("div",L,[...e[3]||(e[3]=[s("span",null,"暂无封面",-1)])]))]),s("div",N,[s("h3",null,i(o.game_name),1),s("p",F,[e[4]||(e[4]=s("strong",null,"作者:",-1)),c(" "+i(o.author),1)]),s("p",V,[e[5]||(e[5]=s("strong",null,"版本:",-1)),c(" "+i(o.version),1)]),s("p",S,i(o.description||"暂无简介"),1),s("div",A,[s("span",{class:v(["online-status",{playable:o.is_online_playable}])},i(o.is_online_playable?"支持在线游玩":"仅下载"),3),s("span",E,i((o.file_size/1024/1024).toFixed(2))+" MB",1),s("span",I,i(d.formatDate(o.upload_time)),1)])]),s("div",M,[o.is_online_playable?(l(),a("span",T,"点击游玩")):(l(),a("span",j,"查看详情"))])])],8,U))),128))])):r("v-if",!0)])}const R=u(f,[["render",q],["__scopeId","data-v-d846ab22"]]);export{R as default};
