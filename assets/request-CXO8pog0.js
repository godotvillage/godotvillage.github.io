const s="http://localhost:31024",w="https://games.moshangzhu.com.cn/",h="https://games.moshangzhu.com.cn/games",i={async getGames(){try{return await(await fetch(`${s}/games`)).json()}catch(r){throw new Error(`获取游戏列表失败: ${r.message}`)}},async uploadGame(r){try{return await(await fetch(`${s}/games/upload`,{method:"POST",body:r})).json()}catch(e){throw new Error(`上传游戏失败: ${e.message}`)}},getDownloadUrl(r){return`${s}/games/download/${r}`}},d={async getProjectCategories(){try{const e=await(await fetch(`${s}/projects/categories`)).json();if(e.success)return e.data;throw new Error(e.error)}catch(r){throw new Error(`获取项目分类失败: ${r.message}`)}},async getProjects(r=null,e=null,t=20,o=null){try{let n=`${s}/projects/list`;const a=new URLSearchParams;r&&a.append("categoryId",r),e&&a.append("status",e),o&&a.append("after",o),a.append("pageSize",t.toString()),a.toString()&&(n+="?"+a.toString());const c=await(await fetch(n)).json();if(c.success)return c.data;throw new Error(c.error)}catch(n){throw new Error(`获取项目列表失败: ${n.message}`)}},async getProjectStats(){try{const e=await(await fetch(`${s}/projects/stats`)).json();if(e.success)return e.data;throw new Error(e.error)}catch(r){throw new Error(`获取项目统计失败: ${r.message}`)}},async getProjectById(r){try{const t=await(await fetch(`${s}/projects/detail/${r}`)).json();if(t.success)return t.data;throw new Error(t.error)}catch(e){throw new Error(`获取项目详情失败: ${e.message}`)}},async createProject(r){try{const t=await(await fetch(`${s}/projects/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(t.success)return t.data;throw new Error(t.error)}catch(e){throw new Error(`创建项目失败: ${e.message}`)}},async updateProject(r,e){try{const o=await(await fetch(`${s}/projects/${r}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(o.success)return o.data;throw new Error(o.error)}catch(t){throw new Error(`更新项目失败: ${t.message}`)}},async addProjectUpdate(r,e){try{const o=await(await fetch(`${s}/projects/${r}/updates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(o.success)return o.data;throw new Error(o.error)}catch(t){throw new Error(`添加项目更新失败: ${t.message}`)}},async deleteProject(r){try{const t=await(await fetch(`${s}/projects/${r}/delete`,{method:"DELETE"})).json();if(t.success)return t.data;throw new Error(t.error)}catch(e){throw new Error(`删除项目失败: ${e.message}`)}}};export{s as baseUrl,i as gameApi,h as gameBaseUrl,w as imageBaseUrl,d as projectApi};
