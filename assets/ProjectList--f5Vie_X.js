import{j as c,y,z as U,A as z,c as l,o as i,a as s,f as d,t as a,q as f,B as h,d as O,F as k,h as b,p as A,x as N,b as m}from"./app-DDxaRg3J.js";import{_ as J}from"./plugin-vue_export-helper-DlAUqK2U.js";const $={class:"project-list"},q={class:"list-header"},K={class:"stats"},G={class:"stat-item"},H={class:"stat-number"},Q={class:"stat-item"},R={class:"stat-number"},W={class:"stat-item"},X={class:"stat-number"},Y={class:"filter-controls"},Z={class:"filter-group"},tt={class:"filter-group"},st={class:"filter-group"},et={key:0,class:"empty-state"},ot={key:1,class:"projects-grid"},at=["onClick"],nt={class:"project-content"},lt={class:"project-header"},it={class:"project-title"},dt={class:"project-meta"},rt={key:0,class:"project-category"},ut={key:1,class:"project-time"},ct={class:"project-description"},vt={key:0,class:"project-tags"},pt={key:0,class:"more-tags"},mt={class:"project-footer"},gt={class:"project-author"},_t={class:"project-date"},yt={class:"project-actions"},ft=["onClick"],ht={class:"modal-header"},kt={class:"modal-body"},bt={class:"project-detail-meta"},wt={class:"detail-item"},Ct={key:0,class:"detail-item"},xt={key:1,class:"detail-item"},Dt={class:"detail-item"},St={class:"detail-item"},jt={class:"detail-description"},It={key:0,class:"detail-tags"},Pt={class:"tags-list"},At={__name:"ProjectList",setup(Nt){const r=c([]),n=c(null),v=c(""),p=c(""),g=c("newest"),L=y(()=>r.value.filter(e=>e.status==="进行中").length),V=y(()=>r.value.filter(e=>e.status==="已完成").length),w=y(()=>{let e=r.value;return v.value&&(e=e.filter(t=>t.status===v.value)),p.value&&(e=e.filter(t=>t.category===p.value)),e.sort((t,o)=>{switch(g.value){case"oldest":return new Date(t.createdAt)-new Date(o.createdAt);case"name":return t.name.localeCompare(o.name);case"newest":default:return new Date(o.createdAt)-new Date(t.createdAt)}}),e}),C=()=>{const e=localStorage.getItem("farmProjects");e&&(r.value=JSON.parse(e))},E=()=>{localStorage.setItem("farmProjects",JSON.stringify(r.value))},T=e=>{n.value=e,document.body.style.overflow="hidden"},_=()=>{n.value=null,document.body.style.overflow=""},B=e=>{const t=["计划中","进行中","暂停","已完成"],u=(t.indexOf(e.status)+1)%t.length;e.status=t[u],E()},x=e=>({进行中:"status-progress",已完成:"status-completed",暂停:"status-paused",计划中:"status-planned"})[e]||"status-default",D=e=>({进行中:"🚀",已完成:"✅",暂停:"⏸️",计划中:"📋"})[e]||"📝",F=e=>({计划中:"🚀",进行中:"⏸️",暂停:"✅",已完成:"📋"})[e]||"🔄",S=e=>({"2D":"🎨","3D":"🎯"})[e]||"📁",M=(e,t)=>e.length<=t?e:e.substring(0,t)+"...",j=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"}),I=e=>{C()},P=e=>{e.key==="Escape"&&n.value&&_()};return U(()=>{C(),window.addEventListener("projectAdded",I),document.addEventListener("keydown",P)}),z(()=>{window.removeEventListener("projectAdded",I),document.removeEventListener("keydown",P),document.body.style.overflow=""}),(e,t)=>(i(),l("div",$,[s("div",q,[t[7]||(t[7]=s("h3",null,"🌾 农场项目展示",-1)),s("div",K,[s("span",G,[s("span",H,a(r.value.length),1),t[4]||(t[4]=s("span",{class:"stat-label"},"总项目数",-1))]),s("span",Q,[s("span",R,a(L.value),1),t[5]||(t[5]=s("span",{class:"stat-label"},"进行中",-1))]),s("span",W,[s("span",X,a(V.value),1),t[6]||(t[6]=s("span",{class:"stat-label"},"已完成",-1))])])]),s("div",Y,[s("div",Z,[t[9]||(t[9]=s("label",null,"状态筛选：",-1)),f(s("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o)},[...t[8]||(t[8]=[O('<option value="" data-v-e3bc70ea>全部状态</option><option value="进行中" data-v-e3bc70ea>🚀 进行中</option><option value="已完成" data-v-e3bc70ea>✅ 已完成</option><option value="暂停" data-v-e3bc70ea>⏸️ 暂停</option><option value="计划中" data-v-e3bc70ea>📋 计划中</option>',5)])],512),[[h,v.value]])]),s("div",tt,[t[11]||(t[11]=s("label",null,"分类筛选：",-1)),f(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>p.value=o)},[...t[10]||(t[10]=[s("option",{value:""},"全部分类",-1),s("option",{value:"2D"},"🎨 2D",-1),s("option",{value:"3D"},"🎯 3D",-1)])],512),[[h,p.value]])]),s("div",st,[t[13]||(t[13]=s("label",null,"排序方式：",-1)),f(s("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o)},[...t[12]||(t[12]=[s("option",{value:"newest"},"最新创建",-1),s("option",{value:"oldest"},"最早创建",-1),s("option",{value:"name"},"项目名称",-1)])],512),[[h,g.value]])])]),w.value.length===0?(i(),l("div",et,[...t[14]||(t[14]=[s("div",{class:"empty-icon"},"🌱",-1),s("h4",null,"还没有项目哦",-1),s("p",null,"成为第一个在农场种下创意种子的人吧！",-1)])])):(i(),l("div",ot,[(i(!0),l(k,null,b(w.value,o=>(i(),l("div",{key:o.id,class:"project-card",onClick:u=>T(o)},[s("div",nt,[s("div",lt,[s("h4",it,a(o.name),1),s("div",{class:A(["project-status",x(o.status)])},a(D(o.status))+" "+a(o.status),3)]),s("div",dt,[o.category?(i(),l("span",rt,a(S(o.category))+" "+a(o.category),1)):d("v-if",!0),o.expectedTime?(i(),l("span",ut," ⏰ "+a(o.expectedTime),1)):d("v-if",!0)]),s("p",ct,a(M(o.description,120)),1),o.tags&&o.tags.length>0?(i(),l("div",vt,[(i(!0),l(k,null,b(o.tags.slice(0,3),u=>(i(),l("span",{key:u,class:"project-tag"},a(u),1))),128)),o.tags.length>3?(i(),l("span",pt," +"+a(o.tags.length-3),1)):d("v-if",!0)])):d("v-if",!0),s("div",mt,[s("span",gt,"👤 "+a(o.author),1),s("span",_t,a(j(o.createdAt)),1)])]),s("div",yt,[s("button",{onClick:N(u=>B(o),["stop"]),class:"action-btn status-btn"},a(F(o.status)),9,ft)])],8,at))),128))])),d(" 项目详情模态框 "),n.value?(i(),l("div",{key:2,class:"modal-overlay",onClick:_},[s("div",{class:"modal-content",onClick:t[3]||(t[3]=N(()=>{},["stop"]))},[s("div",ht,[s("h3",null,a(n.value.name),1),s("button",{onClick:_,class:"close-btn"},"×")]),s("div",kt,[s("div",bt,[s("div",wt,[t[15]||(t[15]=s("strong",null,"状态：",-1)),s("span",{class:A(x(n.value.status))},a(D(n.value.status))+" "+a(n.value.status),3)]),n.value.category?(i(),l("div",Ct,[t[16]||(t[16]=s("strong",null,"分类：",-1)),m(" "+a(S(n.value.category))+" "+a(n.value.category),1)])):d("v-if",!0),n.value.expectedTime?(i(),l("div",xt,[t[17]||(t[17]=s("strong",null,"预期完成时间：",-1)),m(" ⏰ "+a(n.value.expectedTime),1)])):d("v-if",!0),s("div",Dt,[t[18]||(t[18]=s("strong",null,"填写人：",-1)),m(" 👤 "+a(n.value.author),1)]),s("div",St,[t[19]||(t[19]=s("strong",null,"创建时间：",-1)),m(" "+a(j(n.value.createdAt)),1)])]),s("div",jt,[t[20]||(t[20]=s("strong",null,"项目描述：",-1)),s("p",null,a(n.value.description),1)]),n.value.tags&&n.value.tags.length>0?(i(),l("div",It,[t[21]||(t[21]=s("strong",null,"标签：",-1)),s("div",Pt,[(i(!0),l(k,null,b(n.value.tags,o=>(i(),l("span",{key:o,class:"detail-tag"},a(o),1))),128))])])):d("v-if",!0)])])])):d("v-if",!0)]))}},Et=J(At,[["__scopeId","data-v-e3bc70ea"]]);export{Et as default};
