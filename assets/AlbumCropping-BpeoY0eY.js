import{_ as i,c as l,o,f as d,a as c,d as b}from"./app-BDeLlvUc.js";const n={name:"AlbumCropping",data(){return{scriptsLoaded:!1}},mounted(){this.loadExternalResources()},beforeUnmount(){window.albumCroppingCleanup&&window.albumCroppingCleanup()},methods:{loadExternalResources(){["https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css","https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css","https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap"].forEach(e=>{if(!document.querySelector(`link[href="${e}"]`)){const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}});const a=document.createElement("link");a.rel="stylesheet",a.href="/tools/album_cropping/css/main.css",document.head.appendChild(a),this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js").then(()=>this.loadScript("/tools/album_cropping/js/utils.js")).then(()=>this.loadScript("/tools/album_cropping/js/export.js")).then(()=>this.loadScript("/tools/album_cropping/js/main.js")).then(()=>{this.scriptsLoaded=!0,console.log("Album Cropping Tool initialized")}).catch(e=>{console.error("Error loading scripts:",e)})},loadScript(s){return new Promise((a,e)=>{if(document.querySelector(`script[src="${s}"]`)){a();return}const t=document.createElement("script");t.src=s,t.onload=a,t.onerror=e,document.body.appendChild(t)})}}},r={class:"album-cropping-wrapper"};function v(s,a,e,t,p,x){return o(),l("div",r,[d(" 主容器 "),a[0]||(a[0]=c('<div id="app" class="h-screen flex flex-col" data-v-dceb5a00><!-- 顶部工具栏 --><header id="toolbar" class="bg-gray-800 border-b border-gray-700 px-4 py-3 flex items-center justify-between shadow-lg" data-v-dceb5a00><!-- 左侧工具组 --><div class="flex items-center space-x-4" data-v-dceb5a00><!-- Logo和标题 --><div class="flex items-center space-x-3" data-v-dceb5a00><div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center" data-v-dceb5a00><i class="fas fa-cut text-white text-sm" data-v-dceb5a00></i></div><h1 class="text-lg font-semibold text-white" data-v-dceb5a00>图集裁剪工具</h1></div><!-- 文件操作 --><div class="flex items-center space-x-2" data-v-dceb5a00><button id="openFileBtn" class="btn-primary" data-v-dceb5a00><i class="fas fa-folder-open mr-2" data-v-dceb5a00></i> 打开图片 </button><button id="backToListBtn" class="btn-primary" data-v-dceb5a00><i class="fas fa-backward mr-2" data-v-dceb5a00></i> 回到列表 </button><input type="file" id="fileInput" accept="image/*" class="hidden" data-v-dceb5a00></div></div><!-- 中间工具组 --><div class="flex items-center space-x-2" data-v-dceb5a00><!-- 检测工具 --><div class="flex items-center space-x-2 px-3 py-1 bg-gray-700 rounded-lg" data-v-dceb5a00><button id="autoDetectBtn" class="btn-secondary" disabled data-v-dceb5a00><i class="fas fa-magic mr-2" data-v-dceb5a00></i> 自动检测 </button><div class="w-px h-6 bg-gray-600" data-v-dceb5a00></div><button id="clearRegionsBtn" class="btn-ghost" disabled data-v-dceb5a00><i class="fas fa-eraser mr-1" data-v-dceb5a00></i> 清除 </button></div><!-- 编辑工具 --><div class="flex items-center space-x-2 px-3 py-1 bg-gray-700 rounded-lg" data-v-dceb5a00><button id="selectModeBtn" class="btn-tool active" data-tool="select" data-v-dceb5a00><i class="fas fa-mouse-pointer" data-v-dceb5a00></i></button><button id="rectangleModeBtn" class="btn-tool" data-tool="rectangle" data-v-dceb5a00><i class="fas fa-square" data-v-dceb5a00></i></button><button id="circleModeBtn" class="btn-tool" data-tool="circle" data-v-dceb5a00><i class="fas fa-circle" data-v-dceb5a00></i></button><button id="panModeBtn" class="btn-tool" data-tool="pan" data-v-dceb5a00><i class="fas fa-hand-paper" data-v-dceb5a00></i></button></div></div><!-- 右侧工具组 --><div class="flex items-center space-x-2" data-v-dceb5a00><!-- 历史操作 --><div class="flex items-center space-x-1" data-v-dceb5a00><button id="undoBtn" class="btn-ghost" disabled title="撤销 (Ctrl+Z)" data-v-dceb5a00><i class="fas fa-undo" data-v-dceb5a00></i></button><button id="redoBtn" class="btn-ghost" disabled title="重做 (Ctrl+Y)" data-v-dceb5a00><i class="fas fa-redo" data-v-dceb5a00></i></button></div><!-- 导出操作 --><div class="flex items-center space-x-2" data-v-dceb5a00><button id="exportBtn" class="btn btn-primary" title="导出选中区域" data-v-dceb5a00><i class="fas fa-download" data-v-dceb5a00></i> 导出 </button><button id="exportAllBtn" class="btn btn-secondary" title="导出所有区域" data-v-dceb5a00><i class="fas fa-file-archive" data-v-dceb5a00></i> 导出全部 </button><button id="exportDataBtn" class="btn btn-secondary" title="导出区域数据" data-v-dceb5a00><i class="fas fa-database" data-v-dceb5a00></i> 导出数据 </button></div><!-- 设置 --><button id="settingsBtn" class="btn-ghost" data-v-dceb5a00><i class="fas fa-cog" data-v-dceb5a00></i></button></div></header><!-- 主内容区域 --><main class="flex-1 flex overflow-hidden" data-v-dceb5a00><!-- 左侧边栏 --><aside id="sidebar" class="w-80 bg-gray-800 border-r border-gray-700 flex flex-col overflow-scroll" data-v-dceb5a00><!-- 侧边栏标题 --><div class="px-4 py-3 border-b border-gray-700" data-v-dceb5a00><h2 class="text-sm font-semibold text-gray-300 uppercase tracking-wide" data-v-dceb5a00>控制面板</h2></div><!-- 检测参数面板 --><div id="detectionPanel" class="p-4 border-b border-gray-700" data-v-dceb5a00><h3 class="text-sm font-medium text-white mb-3" data-v-dceb5a00>检测参数</h3><div class="space-y-3" data-v-dceb5a00><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>敏感度</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="range" id="sensitivitySlider" min="1" max="100" value="50" class="flex-1 slider" data-v-dceb5a00><span id="sensitivityValue" class="text-xs text-gray-300 w-8" data-v-dceb5a00>50</span></div></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>最小区域大小</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="range" id="minSizeSlider" min="10" max="1000" value="100" class="flex-1 slider" data-v-dceb5a00><span id="minSizeValue" class="text-xs text-gray-300 w-12" data-v-dceb5a00>100px</span></div></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>边缘检测强度</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="range" id="edgeThresholdSlider" min="1" max="100" value="30" class="flex-1 slider" data-v-dceb5a00><span id="edgeThresholdValue" class="text-xs text-gray-300 w-8" data-v-dceb5a00>30</span></div></div></div></div><!-- 区域列表面板 --><div id="regionsPanel" class="flex-1 flex flex-col" data-v-dceb5a00><div class="px-4 py-3 border-b border-gray-700 flex items-center justify-between" data-v-dceb5a00><h3 class="text-sm font-medium text-white" data-v-dceb5a00>检测区域</h3><div class="flex items-center space-x-2" data-v-dceb5a00><button id="selectAllBtn" class="text-xs text-blue-400 hover:text-blue-300" disabled data-v-dceb5a00>全选</button><button id="deselectAllBtn" class="text-xs text-gray-400 hover:text-gray-300" disabled data-v-dceb5a00>取消</button></div></div><div id="regionsList" class="flex-1 overflow-y-auto p-2" data-v-dceb5a00><div class="text-center text-gray-500 text-sm py-8" data-v-dceb5a00><i class="fas fa-image text-2xl mb-2 block" data-v-dceb5a00></i> 请先加载图片并进行区域检测 </div></div></div><!-- 导出设置面板 --><div id="exportPanel" class="p-4 border-t border-gray-700" data-v-dceb5a00><h3 class="text-sm font-medium text-white mb-3" data-v-dceb5a00>导出设置</h3><div class="space-y-3" data-v-dceb5a00><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>文件格式</label><select id="exportFormat" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm" data-v-dceb5a00><option value="png" data-v-dceb5a00>PNG (推荐)</option><option value="jpg" data-v-dceb5a00>JPG</option><option value="webp" data-v-dceb5a00>WebP</option><option value="bmp" data-v-dceb5a00>BMP</option></select></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>质量</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="range" id="exportQuality" min="0.1" max="1" step="0.1" value="0.9" class="flex-1 slider" data-v-dceb5a00><span id="qualityValue" class="text-xs text-gray-300 w-8" data-v-dceb5a00>90%</span></div></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>边距</label><input type="number" id="exportPadding" min="0" max="50" value="0" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm" data-v-dceb5a00></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>缩放</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="range" id="exportScale" min="0.1" max="3" step="0.1" value="1" class="flex-1 slider" data-v-dceb5a00><span id="scaleValue" class="text-xs text-gray-300 w-12" data-v-dceb5a00>100%</span></div></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>命名模式</label><input type="text" id="namingPattern" value="region_{index}" placeholder="region_{index}" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm" data-v-dceb5a00></div><div data-v-dceb5a00><label class="flex items-center text-xs text-gray-400" data-v-dceb5a00><input type="checkbox" id="zipOutput" class="mr-2" data-v-dceb5a00> 打包为ZIP </label></div><div data-v-dceb5a00><label class="block text-xs text-gray-400 mb-1" data-v-dceb5a00>背景色</label><div class="flex items-center space-x-2" data-v-dceb5a00><input type="color" id="backgroundColor" value="#ffffff" class="w-8 h-8 rounded border border-gray-600" data-v-dceb5a00><span class="text-xs text-gray-300" data-v-dceb5a00>透明背景</span><input type="checkbox" id="transparentBg" checked class="ml-auto" data-v-dceb5a00></div></div></div></div></aside><!-- 中央画布区域 --><section id="canvasArea" class="flex-1 flex flex-col bg-gray-900 relative" data-v-dceb5a00><!-- 画布工具栏 --><div class="px-4 py-2 bg-gray-800 border-b border-gray-700 flex items-center justify-between" data-v-dceb5a00><div class="flex items-center space-x-4" data-v-dceb5a00><div id="imageInfo" class="text-sm text-gray-400" data-v-dceb5a00><span id="imageName" data-v-dceb5a00>未加载图片</span><span id="imageDimensions" class="ml-2" data-v-dceb5a00></span></div></div><div class="flex items-center space-x-2" data-v-dceb5a00><!-- 缩放控制 --><div class="flex items-center space-x-2 text-sm" data-v-dceb5a00><button id="zoomOutBtn" class="btn-ghost-sm" data-v-dceb5a00><i class="fas fa-search-minus" data-v-dceb5a00></i></button><span id="zoomLevel" class="text-gray-400 w-12 text-center" data-v-dceb5a00>100%</span><button id="zoomInBtn" class="btn-ghost-sm" data-v-dceb5a00><i class="fas fa-search-plus" data-v-dceb5a00></i></button><button id="fitToScreenBtn" class="btn-ghost-sm ml-2" title="适应屏幕" data-v-dceb5a00><i class="fas fa-expand-arrows-alt" data-v-dceb5a00></i></button></div></div></div><!-- 画布容器 --><div id="canvasContainer" class="flex-1 relative overflow-hidden" data-v-dceb5a00><!-- 拖拽上传区域 --><div id="dropZone" class="absolute inset-0 flex items-center justify-center" data-v-dceb5a00><div class="text-center" data-v-dceb5a00><div class="w-24 h-24 mx-auto mb-4 bg-gray-800 rounded-full flex items-center justify-center" data-v-dceb5a00><i class="fas fa-cloud-upload-alt text-3xl text-gray-500" data-v-dceb5a00></i></div><h3 class="text-xl font-medium text-gray-300 mb-2" data-v-dceb5a00>拖拽图片到此处</h3><p class="text-gray-500 mb-4" data-v-dceb5a00>或点击上方&quot;打开图片&quot;按钮选择文件</p><p class="text-sm text-gray-600" data-v-dceb5a00>支持 PNG, JPG, GIF, WebP 格式</p></div></div><!-- 主画布 --><canvas id="mainCanvas" class="absolute top-0 left-0 cursor-crosshair hidden" data-v-dceb5a00></canvas><!-- 区域覆盖层 --><canvas id="overlayCanvas" class="absolute top-0 left-0 pointer-events-none hidden" data-v-dceb5a00></canvas><!-- 加载指示器 --><div id="loadingIndicator" class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" data-v-dceb5a00><div class="text-center" data-v-dceb5a00><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4" data-v-dceb5a00></div><p class="text-white" data-v-dceb5a00>处理中...</p><div id="progressBar" class="w-64 bg-gray-700 rounded-full h-2 mt-2" data-v-dceb5a00><div id="progressFill" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width:0%;" data-v-dceb5a00></div></div></div></div></div></section></main><!-- 底部状态栏 --><footer id="statusBar" class="bg-gray-800 border-t border-gray-700 px-4 py-2 flex items-center justify-between text-sm" data-v-dceb5a00><div class="flex items-center space-x-4" data-v-dceb5a00><span id="statusText" class="text-gray-400" data-v-dceb5a00>就绪</span><div id="regionCount" class="text-gray-500" data-v-dceb5a00>区域: 0</div><div id="selectedCount" class="text-gray-500" data-v-dceb5a00>已选: 0</div></div><div class="flex items-center space-x-4" data-v-dceb5a00><div id="mousePos" class="text-gray-500" data-v-dceb5a00>0, 0</div><div id="imageSize" class="text-gray-500" data-v-dceb5a00>0 × 0</div><div id="performanceInfo" class="text-gray-500" data-v-dceb5a00>内存: 0MB</div></div></footer></div>',1)),d(" 模态框容器 "),a[1]||(a[1]=b("div",{id:"modalContainer"},null,-1)),d(" 导出进度模态框 "),a[2]||(a[2]=c('<div id="exportModal" class="modal hidden" data-v-dceb5a00><div class="modal-content" data-v-dceb5a00><div class="modal-header" data-v-dceb5a00><h3 data-v-dceb5a00>导出进度</h3><button class="modal-close" data-v-dceb5a00>×</button></div><div class="modal-body" data-v-dceb5a00><div class="progress-container" data-v-dceb5a00><div class="progress-bar" data-v-dceb5a00><div id="exportProgress" class="progress-fill" data-v-dceb5a00></div></div><div id="exportStatus" class="progress-text" data-v-dceb5a00>准备导出...</div></div><div id="exportDetails" class="export-details" data-v-dceb5a00></div></div><div class="modal-footer" data-v-dceb5a00><button id="cancelExportBtn" class="btn btn-secondary" data-v-dceb5a00>取消</button></div></div></div>',1)),d(" 数据导出模态框 "),a[3]||(a[3]=c('<div id="dataExportModal" class="modal hidden" data-v-dceb5a00><div class="modal-content" data-v-dceb5a00><div class="modal-header" data-v-dceb5a00><h3 data-v-dceb5a00>导出区域数据</h3><button class="modal-close" data-v-dceb5a00>×</button></div><div class="modal-body" data-v-dceb5a00><div class="form-group" data-v-dceb5a00><label for="dataFormat" data-v-dceb5a00>数据格式:</label><select id="dataFormat" class="form-control" data-v-dceb5a00><option value="json" data-v-dceb5a00>JSON</option><option value="xml" data-v-dceb5a00>XML</option><option value="csv" data-v-dceb5a00>CSV</option></select></div><div class="form-group" data-v-dceb5a00><label data-v-dceb5a00><input type="checkbox" id="includePixels" data-v-dceb5a00> 包含像素数据 </label></div><div class="form-group" data-v-dceb5a00><label data-v-dceb5a00><input type="checkbox" id="relativePaths" checked data-v-dceb5a00> 使用相对坐标 </label></div><div class="preview-container" data-v-dceb5a00><h4 data-v-dceb5a00>预览:</h4><pre id="dataPreview" class="data-preview" data-v-dceb5a00></pre></div></div><div class="modal-footer" data-v-dceb5a00><button id="downloadDataBtn" class="btn btn-primary" data-v-dceb5a00>下载</button><button class="btn btn-secondary modal-close" data-v-dceb5a00>取消</button></div></div></div>',1)),d(" 上下文菜单 "),a[4]||(a[4]=c('<div id="contextMenu" class="fixed bg-gray-800 border border-gray-600 rounded-lg shadow-lg py-1 hidden z-50" data-v-dceb5a00><button class="context-menu-item" data-action="select" data-v-dceb5a00><i class="fas fa-mouse-pointer mr-2" data-v-dceb5a00></i>选择区域 </button><button class="context-menu-item" data-action="edit" data-v-dceb5a00><i class="fas fa-edit mr-2" data-v-dceb5a00></i>编辑边界 </button><div class="border-t border-gray-600 my-1" data-v-dceb5a00></div><button class="context-menu-item" data-action="merge" data-v-dceb5a00><i class="fas fa-object-group mr-2" data-v-dceb5a00></i>合并区域 </button><button class="context-menu-item" data-action="split" data-v-dceb5a00><i class="fas fa-cut mr-2" data-v-dceb5a00></i>分割区域 </button><div class="border-t border-gray-600 my-1" data-v-dceb5a00></div><button class="context-menu-item" data-action="export" data-v-dceb5a00><i class="fas fa-download mr-2" data-v-dceb5a00></i>导出区域 </button><button class="context-menu-item text-red-400" data-action="delete" data-v-dceb5a00><i class="fas fa-trash mr-2" data-v-dceb5a00></i>删除区域 </button></div>',1))])}const m=i(n,[["render",v],["__scopeId","data-v-dceb5a00"]]);export{m as default};
