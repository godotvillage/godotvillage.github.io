import{_ as s,c as a,a as t,o as e}from"./app-DN8lWiKq.js";const l="/assets/images/tutorial/tilemap/tilemaplayer.png",n="/assets/images/tutorial/tilemap/add-tilemap-node.png",h="/assets/images/tutorial/tilemap/tilesetpanel.png",p="/assets/images/tutorial/tilemap/tilemap-panel.png",k="/assets/images/tutorial/tilemap/terrainset.png",r="/assets/images/tutorial/tilemap/tileset-draw-terrain.png",d="/assets/images/tutorial/tilemap/use-tileset-terrain.png",g={};function o(c,i){return e(),a("div",null,[...i[0]||(i[0]=[t('<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>图块地图（Tile Map）是Godot中功能强大的2d地图制作节点，由于TileMap在Godot4.5已废弃，且与TileMapLayer使用其实差异不大，故本篇主要讲解 TileMapLayer。本篇为快速教程，指在方便用户快速上手TileMapLayer，一个完整的</p><h2 id="基本概念" tabindex="-1"><a class="header-anchor" href="#基本概念"><span>基本概念</span></a></h2><ul><li><strong>Tile</strong> : 相当于颜料，瓦片是TileMap中最小的单位 ，包含图集坐标信息，纹理、碰撞形状、导航网格等属性</li><li><strong>TileMap</strong> : 相当于画布，包含绘制工具(例如多种不一样画笔)，将设置好的Tile，根据场景需要进行绘制。</li><li><strong>TileSet</strong> : 相当于调色板，对导入素材进行预处理，你可以准备绘制前预制颜料的亮度，颜色，数量(编辑图块的渲染，物理层，动画...)</li><li>它们之间的关系如下<br><img src="'+l+'" alt="之间的关系" loading="lazy"></li></ul><h2 id="使用技巧1-tilemaplayer节点搭建一个场景" tabindex="-1"><a class="header-anchor" href="#使用技巧1-tilemaplayer节点搭建一个场景"><span>使用技巧1：TileMapLayer节点搭建一个场景</span></a></h2><p>1.创建TileMaplayer节点（可根据需求添加多个TileMapLayer节点）<br><img src="'+n+'" alt="步骤一" loading="lazy"><br> 2.创建的一个新的TileSet（在TileMap节点的检查器中），编辑好你需要的瓦片<br><img src="'+h+'" alt="步骤二" loading="lazy"><br> 3.绘制 使用TileMap编辑工具，使用画笔工具后选择图块来快速构建地图。<br><img src="'+p+'" alt="输入图片说明" loading="lazy"></p><h2 id="使用技巧2-自动地形设置方法" tabindex="-1"><a class="header-anchor" href="#使用技巧2-自动地形设置方法"><span>使用技巧2：自动地形设置方法</span></a></h2><p>1.打开TileMapLayer的检查器，在TileSet的地形设置（TerrainSets）添加地形图层，注意设置Mode为Match Corners<br><img src="'+k+'" alt="输入图片说明" loading="lazy"><br> 2.在TileSet中，选择绘制属性/地形/选择创建好的地形，在素材中进行绘制<br><img src="'+r+'" alt="输入图片说明" loading="lazy"><br> 3.回到TileMap中，选择地形进行绘制<br><img src="'+d+`" alt="输入图片说明" loading="lazy"></p><h2 id="在gdscritp访问tilemap" tabindex="-1"><a class="header-anchor" href="#在gdscritp访问tilemap"><span>在GDscritp访问TileMap</span></a></h2><p><strong>访问节点与基础信息</strong>​</p><table><thead><tr><th>代码</th><th>作用</th></tr></thead><tbody><tr><td>​<code>@onready var tilemap = $TileMap</code></td><td>获取场景中TileMap节点的引用。</td></tr><tr><td><code>tile_set</code></td><td>获取该TileMap所使用的TileSet资源</td></tr><tr><td><code>get_cell_source_id(coords)</code></td><td>获取指定单元格的瓦片源ID</td></tr><tr><td><code>get_cell_atlas_coords(layer, coords)</code></td><td>获取指定单元格的瓦片在图集中的坐标。</td></tr></tbody></table><p><strong>调整和修改</strong></p><table><thead><tr><th>代码</th><th>作用</th></tr></thead><tbody><tr><td><code>local_to_map(pos)</code></td><td>转换为瓦片位置</td></tr><tr><td><code>set_cell(coords, source_id, atlas_coords, alternative_tile)</code></td><td>在指定位置设置瓦片</td></tr><tr><td><code>serase_cell(coords)</code></td><td>清除指定位置的瓦片</td></tr></tbody></table><h2 id="案例1-防止相机移出地图范围" tabindex="-1"><a class="header-anchor" href="#案例1-防止相机移出地图范围"><span>案例1：防止相机移出地图范围</span></a></h2><p>​基于地图信息的游戏逻辑：利用获取到的地图信息来决定游戏行为。一个典型的应用是<strong>设置相机边界</strong>，防止相机移出地图范围</p><p>1.添加TileMapLayer节点和玩家相机节点</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	@onready</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Camera2D</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> $</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">player/Camera2D</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	@export</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TileMapLayer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.设置相机边界逻辑</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">func</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> _ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#获取TileMap节点中所有已被放置图块所占据的矩形区域</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#grow(-1)为缩进一格 为避免在相机视口内露出地图边缘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> used</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> :=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get_used_rect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#获取 TileMap 一个图块的尺寸</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_size</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> :=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_size</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#根据TileMap地块尺寸 限制相机的移动</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	# 将网格坐标表示的边界转换为像素坐标表示的边界</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#2d相机的最高/低点</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">limit_top</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> used</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">position</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">limit_bottom</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">used</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#2d相机的最左/右点</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">limit_left</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> used</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">position</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">limit_right</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> used</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	# 重置相机的平滑过渡，防止玩家初始位置在限制区域外时产生镜头抖动</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	camera_2d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">reset_smoothing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="案例2-鼠标点击添加图块" tabindex="-1"><a class="header-anchor" href="#案例2-鼠标点击添加图块"><span>案例2：鼠标点击添加图块</span></a></h2><p>通过获取TileMap的瓦片位置坐标来修改地图效果，制作出游戏中实时添加地图图块的效果</p><p>1.还是添加需要修改的TileMapLayer节点</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	@onready</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_map_layer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TileMapLayer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> $</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">TileMapLayer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2.在func _input()中设置好输入映射（鼠标点击动作），获取鼠标点击位置，再转换为瓦片位置</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">func</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> _input</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#ABB2BF;--shiki-dark-font-style:italic;">event</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">	#当鼠标左键点击，执行以下操作</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	if</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Input</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_action_just_pressed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;click&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		#获取鼠标点击的全局位置</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> mouse_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Vector2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get_global_mouse_position</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		#转换鼠标全局为瓦片位置</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_mosuse_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Vector2i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tile_map_layer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">local_to_map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">mouse_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.定位要添加的瓦片素材坐标位置 图片ID+图集坐标</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#TileSet中图片素材的id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> source_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#TileSet中图片素材的坐标位置</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> atlas_coord</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> : </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Vector2i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Vector2i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">13</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4.使用set_cell（鼠标点击位置，素材图片的id,素材瓦片的位置坐标）函数，将瓦片在运行时添加到TileMap中</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_map_layer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set_cell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_mosuse_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> , </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">source_id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> , </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">atlas_coord</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>5.拓展：再添加一个鼠标右击清除的图块的效果</p><div class="language-gdscript line-numbers-mode" data-highlighter="shiki" data-ext="gdscript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-gdscript"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_map_layer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set_cell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tile_mosuse_pos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> , </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> , </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">atlas_coord</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意<br> 1.为确保类型安全可以在var 声明这个变量的类型<br> 2.tile_mosuse_posw瓦片位置变量类型为Vector2i区别于Vector2，所以需要转化</p><h2 id="参考视频" tabindex="-1"><a class="header-anchor" href="#参考视频"><span>参考视频</span></a></h2><p><a href="https://www.bilibili.com/video/BV1Yz4y1b7hz" target="_blank" rel="noopener noreferrer">如何使用 TileMap｜Godot 4 教程《勇者传说》#2_哔哩哔哩_bilibili</a><br><a href="https://www.bilibili.com/video/BV17t42157si" target="_blank" rel="noopener noreferrer">Godot 4 TileMap 教程（1）设置、图层、动画_哔哩哔哩_bilibili</a></p>`,34)])])}const A=s(g,[["render",o]]),m=JSON.parse('{"path":"/tutorial/tilemap.html","title":"全局加载与单例模式","lang":"zh-CN","frontmatter":{"title":"全局加载与单例模式","author":"Goodman","date":"2025-10-23T00:00:00.000Z","category":["教程"],"tag":["瓦片地图"],"description":"简介 图块地图（Tile Map）是Godot中功能强大的2d地图制作节点，由于TileMap在Godot4.5已废弃，且与TileMapLayer使用其实差异不大，故本篇主要讲解 TileMapLayer。本篇为快速教程，指在方便用户快速上手TileMapLayer，一个完整的 基本概念 Tile : 相当于颜料，瓦片是TileMap中最小的单位 ，...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"全局加载与单例模式\\",\\"image\\":[\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/tilemaplayer.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/add-tilemap-node.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/tilesetpanel.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/tilemap-panel.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/terrainset.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/tileset-draw-terrain.png\\",\\"https://godotvillage.github.io/assets/images/tutorial/tilemap/use-tileset-terrain.png\\"],\\"datePublished\\":\\"2025-10-23T00:00:00.000Z\\",\\"dateModified\\":\\"2025-10-23T02:37:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Goodman\\"}]}"],["meta",{"property":"og:url","content":"https://godotvillage.github.io/tutorial/tilemap.html"}],["meta",{"property":"og:site_name","content":"Godot新手村"}],["meta",{"property":"og:title","content":"全局加载与单例模式"}],["meta",{"property":"og:description","content":"简介 图块地图（Tile Map）是Godot中功能强大的2d地图制作节点，由于TileMap在Godot4.5已废弃，且与TileMapLayer使用其实差异不大，故本篇主要讲解 TileMapLayer。本篇为快速教程，指在方便用户快速上手TileMapLayer，一个完整的 基本概念 Tile : 相当于颜料，瓦片是TileMap中最小的单位 ，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://godotvillage.github.io/assets/images/tutorial/tilemap/tilemaplayer.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-23T02:37:48.000Z"}],["meta",{"property":"article:author","content":"Goodman"}],["meta",{"property":"article:tag","content":"瓦片地图"}],["meta",{"property":"article:published_time","content":"2025-10-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-23T02:37:48.000Z"}]]},"git":{"createdTime":1761187068000,"updatedTime":1761187068000,"contributors":[{"name":"moshangzhu","username":"moshangzhu","email":"925236118@qq.com","commits":1,"url":"https://github.com/moshangzhu"}]},"readingTime":{"minutes":3.99,"words":1198},"filePathRelative":"tutorial/tilemap.md","excerpt":"<h2>简介</h2>\\n<p>图块地图（Tile Map）是Godot中功能强大的2d地图制作节点，由于TileMap在Godot4.5已废弃，且与TileMapLayer使用其实差异不大，故本篇主要讲解 TileMapLayer。本篇为快速教程，指在方便用户快速上手TileMapLayer，一个完整的</p>\\n<h2>基本概念</h2>\\n<ul>\\n<li><strong>Tile</strong> : 相当于颜料，瓦片是TileMap中最小的单位 ，包含图集坐标信息，纹理、碰撞形状、导航网格等属性</li>\\n<li><strong>TileMap</strong> : 相当于画布，包含绘制工具(例如多种不一样画笔)，将设置好的Tile，根据场景需要进行绘制。</li>\\n<li><strong>TileSet</strong> : 相当于调色板，对导入素材进行预处理，你可以准备绘制前预制颜料的亮度，颜色，数量(编辑图块的渲染，物理层，动画...)</li>\\n<li>它们之间的关系如下<br>\\n<img src=\\"/assets/images/tutorial/tilemap/tilemaplayer.png\\" alt=\\"之间的关系\\" loading=\\"lazy\\"></li>\\n</ul>","autoDesc":true}');export{A as comp,m as data};
