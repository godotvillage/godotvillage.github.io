import{j as g,y as V,z as q,c as o,o as n,a,f as u,q as z,v as B,F as _,h as m,p as f,t as l,b as v,x as T}from"./app-D8xy1cKz.js";import{_ as Q}from"./plugin-vue_export-helper-DlAUqK2U.js";const R={class:"project-search"},E={class:"search-container"},J={class:"search-input-group"},O={class:"search-filters"},W={class:"quick-filters"},U=["onClick"],G={key:0,class:"search-results"},K={class:"results-header"},X={class:"results-count"},Y={key:0,class:"no-results"},Z={key:1,class:"results-grid"},j=["onClick"],ss={class:"result-header"},es=["innerHTML"],ts={class:"result-meta"},as={key:0,class:"result-category"},ls={class:"result-date"},os=["innerHTML"],ns={key:0,class:"result-tags"},is=["innerHTML"],rs={key:0,class:"more-tags"},cs={class:"result-footer"},us={class:"result-author"},ds={class:"result-actions"},vs=["onClick"],gs={class:"modal-header"},_s={class:"modal-body"},ms={class:"project-detail-meta"},hs={class:"detail-item"},ks={key:0,class:"detail-item"},ys={key:1,class:"detail-item"},fs={class:"detail-item"},ps={class:"detail-item"},bs={class:"detail-description"},Cs={key:0,class:"detail-tags"},ws={class:"tags-list"},Ls={__name:"ProjectSearch",setup(Ss){const r=g(""),d=g(""),i=g(null),h=g([]),F=[{key:"recent",label:"æœ€è¿‘åˆ›å»º",icon:"ðŸ†•"},{key:"inProgress",label:"è¿›è¡Œä¸­",icon:"ðŸš€"},{key:"completed",label:"å·²å®Œæˆ",icon:"âœ…"},{key:"gamedev",label:"æ¸¸æˆå¼€å‘",icon:"ðŸŽ®"},{key:"webapp",label:"ç½‘ç«™åº”ç”¨",icon:"ðŸŒ"}],k=V(()=>{let t=h.value;if(d.value)switch(d.value){case"recent":const e=new Date;e.setDate(e.getDate()-7),t=t.filter(s=>new Date(s.createdAt)>e);break;case"inProgress":t=t.filter(s=>s.status==="è¿›è¡Œä¸­");break;case"completed":t=t.filter(s=>s.status==="å·²å®Œæˆ");break;case"gamedev":t=t.filter(s=>s.category==="æ¸¸æˆå¼€å‘");break;case"webapp":t=t.filter(s=>s.category==="ç½‘ç«™åº”ç”¨");break}if(r.value.trim()){const e=r.value.toLowerCase().trim();t=t.filter(s=>s.name.toLowerCase().includes(e)||s.description.toLowerCase().includes(e)||s.tags&&s.tags.some(c=>c.toLowerCase().includes(e))||s.category&&s.category.toLowerCase().includes(e)||s.author.toLowerCase().includes(e))}if(r.value.trim()){const e=r.value.toLowerCase().trim();t.sort((s,c)=>{const $=b(s,e);return b(c,e)-$})}return t}),M=()=>{const t=localStorage.getItem("farmProjects");t&&(h.value=JSON.parse(t))},x=()=>{r.value.trim()&&(d.value="")},D=()=>{r.value=""},P=t=>{d.value===t.key?d.value="":(d.value=t.key,r.value="")},H=()=>{r.value="",d.value=""},I=t=>{i.value=t},p=()=>{i.value=null},N=t=>{t.isFavorite=!t.isFavorite,localStorage.setItem("farmProjects",JSON.stringify(h.value))},b=(t,e)=>{let s=0;return t.name.toLowerCase().includes(e)&&(s+=10,t.name.toLowerCase().startsWith(e)&&(s+=5)),t.description.toLowerCase().includes(e)&&(s+=5),t.tags&&t.tags.some(c=>c.toLowerCase().includes(e))&&(s+=3),t.category&&t.category.toLowerCase().includes(e)&&(s+=2),s},y=t=>{if(!r.value.trim())return t;const e=r.value.trim(),s=new RegExp(`(${e})`,"gi");return t.replace(s,"<mark>$1</mark>")},C=t=>({è¿›è¡Œä¸­:"status-progress",å·²å®Œæˆ:"status-completed",æš‚åœ:"status-paused",è®¡åˆ’ä¸­:"status-planned"})[t]||"status-default",w=t=>({è¿›è¡Œä¸­:"ðŸš€",å·²å®Œæˆ:"âœ…",æš‚åœ:"â¸ï¸",è®¡åˆ’ä¸­:"ðŸ“‹"})[t]||"ðŸ“",L=t=>({æ¸¸æˆå¼€å‘:"ðŸŽ®",ç½‘ç«™åº”ç”¨:"ðŸŒ",ç§»åŠ¨åº”ç”¨:"ðŸ“±",å·¥å…·è½¯ä»¶:"ðŸ”§",å­¦ä¹ é¡¹ç›®:"ðŸ“š",å¼€æºè´¡çŒ®:"ðŸ¤",å…¶ä»–:"ðŸŽ¯"})[t]||"ðŸ“",A=(t,e)=>t.length<=e?t:t.substring(0,e)+"...",S=t=>new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"});return q(()=>{M()}),(t,e)=>(n(),o("div",R,[e[12]||(e[12]=a("div",{class:"search-header"},[a("h3",null,"ðŸ” é¡¹ç›®æœç´¢"),a("p",null,"å¿«é€Ÿæ‰¾åˆ°ä½ æ„Ÿå…´è¶£çš„é¡¹ç›®")],-1)),a("div",E,[a("div",J,[z(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),type:"text",placeholder:"æœç´¢é¡¹ç›®åç§°ã€æè¿°æˆ–æ ‡ç­¾...",class:"search-input",onInput:x},null,544),[[B,r.value]]),r.value?(n(),o("button",{key:0,onClick:D,class:"clear-btn"}," âœ• ")):u("v-if",!0)]),a("div",O,[a("div",W,[e[2]||(e[2]=a("span",{class:"filter-label"},"å¿«é€Ÿç­›é€‰ï¼š",-1)),(n(),o(_,null,m(F,s=>a("button",{key:s.key,onClick:c=>P(s),class:f(["quick-filter-btn",{active:d.value===s.key}])},l(s.icon)+" "+l(s.label),11,U)),64))])])]),r.value||d.value?(n(),o("div",G,[a("div",K,[a("h4",null,[e[3]||(e[3]=v(" æœç´¢ç»“æžœ ",-1)),a("span",X,"("+l(k.value.length)+" ä¸ªé¡¹ç›®)",1)]),a("button",{onClick:H,class:"clear-all-btn"}," æ¸…é™¤æ‰€æœ‰ç­›é€‰ ")]),k.value.length===0?(n(),o("div",Y,[...e[4]||(e[4]=[a("div",{class:"no-results-icon"},"ðŸ”",-1),a("h4",null,"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é¡¹ç›®",-1),a("p",null,"å°è¯•è°ƒæ•´æœç´¢å…³é”®è¯æˆ–ç­›é€‰æ¡ä»¶",-1)])])):(n(),o("div",Z,[(n(!0),o(_,null,m(k.value,s=>(n(),o("div",{key:s.id,class:"result-card",onClick:c=>I(s)},[a("div",ss,[a("h5",{class:"result-title",innerHTML:y(s.name)},null,8,es),a("span",{class:f(["result-status",C(s.status)])},l(w(s.status))+" "+l(s.status),3)]),a("div",ts,[s.category?(n(),o("span",as,l(L(s.category))+" "+l(s.category),1)):u("v-if",!0),a("span",ls,l(S(s.createdAt)),1)]),a("p",{class:"result-description",innerHTML:y(A(s.description,100))},null,8,os),s.tags&&s.tags.length>0?(n(),o("div",ns,[(n(!0),o(_,null,m(s.tags.slice(0,3),c=>(n(),o("span",{key:c,class:"result-tag",innerHTML:y(c)},null,8,is))),128)),s.tags.length>3?(n(),o("span",rs," +"+l(s.tags.length-3),1)):u("v-if",!0)])):u("v-if",!0),a("div",cs,[a("span",us,"ðŸ‘¤ "+l(s.author),1),a("div",ds,[a("button",{onClick:T(c=>N(s),["stop"]),class:"action-btn"},l(s.isFavorite?"â¤ï¸":"ðŸ¤"),9,vs)])])],8,j))),128))]))])):u("v-if",!0),u(" é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡† "),i.value?(n(),o("div",{key:1,class:"modal-overlay",onClick:p},[a("div",{class:"modal-content",onClick:e[1]||(e[1]=T(()=>{},["stop"]))},[a("div",gs,[a("h3",null,l(i.value.name),1),a("button",{onClick:p,class:"close-btn"},"Ã—")]),a("div",_s,[a("div",ms,[a("div",hs,[e[5]||(e[5]=a("strong",null,"çŠ¶æ€ï¼š",-1)),a("span",{class:f(C(i.value.status))},l(w(i.value.status))+" "+l(i.value.status),3)]),i.value.category?(n(),o("div",ks,[e[6]||(e[6]=a("strong",null,"åˆ†ç±»ï¼š",-1)),v(" "+l(L(i.value.category))+" "+l(i.value.category),1)])):u("v-if",!0),i.value.expectedTime?(n(),o("div",ys,[e[7]||(e[7]=a("strong",null,"é¢„æœŸå®Œæˆæ—¶é—´ï¼š",-1)),v(" â° "+l(i.value.expectedTime),1)])):u("v-if",!0),a("div",fs,[e[8]||(e[8]=a("strong",null,"åˆ›å»ºè€…ï¼š",-1)),v(" ðŸ‘¤ "+l(i.value.author),1)]),a("div",ps,[e[9]||(e[9]=a("strong",null,"åˆ›å»ºæ—¶é—´ï¼š",-1)),v(" "+l(S(i.value.createdAt)),1)])]),a("div",bs,[e[10]||(e[10]=a("strong",null,"é¡¹ç›®æè¿°ï¼š",-1)),a("p",null,l(i.value.description),1)]),i.value.tags&&i.value.tags.length>0?(n(),o("div",Cs,[e[11]||(e[11]=a("strong",null,"æ ‡ç­¾ï¼š",-1)),a("div",ws,[(n(!0),o(_,null,m(i.value.tags,s=>(n(),o("span",{key:s,class:"detail-tag"},l(s),1))),128))])])):u("v-if",!0)])])])):u("v-if",!0)]))}},xs=Q(Ls,[["__scopeId","data-v-f756234e"]]);export{xs as default};
